<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>浏览器在输入URL回车之后都发生了什么 | chew's blog</title><meta name="description" content="浏览器在输入URL回车之后都发生了什么"><meta name="keywords" content="笔记,网络,Http"><meta name="author" content="chew"><meta name="copyright" content="chew"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="浏览器在输入URL回车之后都发生了什么"><meta name="twitter:description" content="浏览器在输入URL回车之后都发生了什么"><meta name="twitter:image" content="http://facai1983.top/img/http.jpg"><meta property="og:type" content="article"><meta property="og:title" content="浏览器在输入URL回车之后都发生了什么"><meta property="og:url" content="http://facai1983.top/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/"><meta property="og:site_name" content="chew's blog"><meta property="og:description" content="浏览器在输入URL回车之后都发生了什么"><meta property="og:image" content="http://facai1983.top/img/http.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://facai1983.top/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/"><link rel="prev" title="平衡二叉树，红黑树，B-树，B+树" href="http://facai1983.top/2020/01/25/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%8C%E7%BA%A2%E9%BB%91%E6%A0%91%EF%BC%8CB-%E6%A0%91%EF%BC%8CB-%E6%A0%91/"><link rel="next" title="IO流的层次结构" href="http://facai1983.top/2020/01/23/IO%E6%B5%81%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">chew's blog</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-link"></i><span> Picture</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/default.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">65</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">62</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">58</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-link"></i><span> Picture</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#一-总体流程图"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">一 总体流程图</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#二-URL解析"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">二 URL解析</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-定义"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">1.定义</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-各部分解释"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">2.各部分解释</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-解析流程"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">3.解析流程</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#（1）地址解析"><span class="toc_mobile_items-number">2.3.1.</span> <span class="toc_mobile_items-text">（1）地址解析</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#（2）HSTS"><span class="toc_mobile_items-number">2.3.2.</span> <span class="toc_mobile_items-text">（2）HSTS</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#（3）其他操作"><span class="toc_mobile_items-number">2.3.3.</span> <span class="toc_mobile_items-text">（3）其他操作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#（4）检查缓存"><span class="toc_mobile_items-number">2.3.4.</span> <span class="toc_mobile_items-text">（4）检查缓存</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#三-DNS域名解析"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">三 DNS域名解析</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-IP-地址"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">1 .IP 地址</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-什么是域名解析"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">2.什么是域名解析</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-如何通过URL查询对应IP"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">3.如何通过URL查询对应IP</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-1-浏览器缓存"><span class="toc_mobile_items-number">3.3.1.</span> <span class="toc_mobile_items-text">3.1 浏览器缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-2-操作系统缓存"><span class="toc_mobile_items-number">3.3.2.</span> <span class="toc_mobile_items-text">3.2 操作系统缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-3-路由器缓存"><span class="toc_mobile_items-number">3.3.3.</span> <span class="toc_mobile_items-text">3.3 路由器缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-4-ISP-DNS缓存"><span class="toc_mobile_items-number">3.3.4.</span> <span class="toc_mobile_items-text">3.4 ISP DNS缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-5-根域名服务器查询"><span class="toc_mobile_items-number">3.3.5.</span> <span class="toc_mobile_items-text">3.5 根域名服务器查询</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-小结"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">4.小结</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#四-三次握手建立连接"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">四 三次握手建立连接</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-TCP三次握手"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">1.TCP三次握手</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-什么是SYN攻击"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">2.什么是SYN攻击</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-为什么不使用两次握手"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">3.为什么不使用两次握手</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#五-发送HTTP请求"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">五 发送HTTP请求</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-请求报文"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">1.请求报文</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-1-请求行包含的请求方法-URL"><span class="toc_mobile_items-number">5.1.1.</span> <span class="toc_mobile_items-text">1.1 请求行包含的请求方法 URL</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-2-请求头包含请求的附加信息，由关键字-值对组成，每行一对，关键字和值用英文冒号“-”分隔"><span class="toc_mobile_items-number">5.1.2.</span> <span class="toc_mobile_items-text">1.2 请求头包含请求的附加信息，由关键字&#x2F;值对组成，每行一对，关键字和值用英文冒号“:”分隔</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-3-请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据"><span class="toc_mobile_items-number">5.1.3.</span> <span class="toc_mobile_items-text">1.3 请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-请求流程"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">2.请求流程</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-应用层：发送HTTP请求"><span class="toc_mobile_items-number">5.2.1.</span> <span class="toc_mobile_items-text">2.1 应用层：发送HTTP请求</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-2-传输层：发送TCP报文"><span class="toc_mobile_items-number">5.2.2.</span> <span class="toc_mobile_items-text">2.2 传输层：发送TCP报文</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-3-网络层：IP协议查询Mac地址"><span class="toc_mobile_items-number">5.2.3.</span> <span class="toc_mobile_items-text">2.3 网络层：IP协议查询Mac地址</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-4-链路层：以太网协议"><span class="toc_mobile_items-number">5.2.4.</span> <span class="toc_mobile_items-text">2.4 链路层：以太网协议</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#以太网协议"><span class="toc_mobile_items-number">5.2.4.1.</span> <span class="toc_mobile_items-text">以太网协议</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Mac-地址"><span class="toc_mobile_items-number">5.2.4.2.</span> <span class="toc_mobile_items-text">Mac 地址</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#广播"><span class="toc_mobile_items-number">5.2.4.3.</span> <span class="toc_mobile_items-text">广播</span></a></li></ol></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#六-服务器处理请求并返回-HTTP-报文"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">六 服务器处理请求并返回 HTTP 报文</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-服务器"><span class="toc_mobile_items-number">6.1.</span> <span class="toc_mobile_items-text">1.服务器</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-MVC后台处理阶段"><span class="toc_mobile_items-number">6.2.</span> <span class="toc_mobile_items-text">2.MVC后台处理阶段</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-HTTP响应报文"><span class="toc_mobile_items-number">6.3.</span> <span class="toc_mobile_items-text">3.HTTP响应报文</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#七-浏览器解析渲染画面"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">七 浏览器解析渲染画面</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#八-四次挥手断开连接"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">八 四次挥手断开连接</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-四次挥手"><span class="toc_mobile_items-number">8.1.</span> <span class="toc_mobile_items-text">1.四次挥手</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-为什么连接的时候是三次握手，关闭的时候却是四次握手？"><span class="toc_mobile_items-number">8.2.</span> <span class="toc_mobile_items-text">2.为什么连接的时候是三次握手，关闭的时候却是四次握手？</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-为什么TIME-WAIT状态需要经过2MSL-最大报文段生存时间-才能返回到CLOSE状态？"><span class="toc_mobile_items-number">8.2.1.</span> <span class="toc_mobile_items-text">3.为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-总体流程图"><span class="toc-number">1.</span> <span class="toc-text">一 总体流程图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-URL解析"><span class="toc-number">2.</span> <span class="toc-text">二 URL解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-定义"><span class="toc-number">2.1.</span> <span class="toc-text">1.定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-各部分解释"><span class="toc-number">2.2.</span> <span class="toc-text">2.各部分解释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-解析流程"><span class="toc-number">2.3.</span> <span class="toc-text">3.解析流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#（1）地址解析"><span class="toc-number">2.3.1.</span> <span class="toc-text">（1）地址解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（2）HSTS"><span class="toc-number">2.3.2.</span> <span class="toc-text">（2）HSTS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（3）其他操作"><span class="toc-number">2.3.3.</span> <span class="toc-text">（3）其他操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#（4）检查缓存"><span class="toc-number">2.3.4.</span> <span class="toc-text">（4）检查缓存</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三-DNS域名解析"><span class="toc-number">3.</span> <span class="toc-text">三 DNS域名解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-IP-地址"><span class="toc-number">3.1.</span> <span class="toc-text">1 .IP 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-什么是域名解析"><span class="toc-number">3.2.</span> <span class="toc-text">2.什么是域名解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-如何通过URL查询对应IP"><span class="toc-number">3.3.</span> <span class="toc-text">3.如何通过URL查询对应IP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-浏览器缓存"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1 浏览器缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-操作系统缓存"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.2 操作系统缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-路由器缓存"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3 路由器缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-ISP-DNS缓存"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.4 ISP DNS缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-根域名服务器查询"><span class="toc-number">3.3.5.</span> <span class="toc-text">3.5 根域名服务器查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-小结"><span class="toc-number">3.4.</span> <span class="toc-text">4.小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四-三次握手建立连接"><span class="toc-number">4.</span> <span class="toc-text">四 三次握手建立连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-TCP三次握手"><span class="toc-number">4.1.</span> <span class="toc-text">1.TCP三次握手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-什么是SYN攻击"><span class="toc-number">4.2.</span> <span class="toc-text">2.什么是SYN攻击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-为什么不使用两次握手"><span class="toc-number">4.3.</span> <span class="toc-text">3.为什么不使用两次握手</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五-发送HTTP请求"><span class="toc-number">5.</span> <span class="toc-text">五 发送HTTP请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-请求报文"><span class="toc-number">5.1.</span> <span class="toc-text">1.请求报文</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-请求行包含的请求方法-URL"><span class="toc-number">5.1.1.</span> <span class="toc-text">1.1 请求行包含的请求方法 URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-请求头包含请求的附加信息，由关键字-值对组成，每行一对，关键字和值用英文冒号“-”分隔"><span class="toc-number">5.1.2.</span> <span class="toc-text">1.2 请求头包含请求的附加信息，由关键字&#x2F;值对组成，每行一对，关键字和值用英文冒号“:”分隔</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据"><span class="toc-number">5.1.3.</span> <span class="toc-text">1.3 请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-请求流程"><span class="toc-number">5.2.</span> <span class="toc-text">2.请求流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-应用层：发送HTTP请求"><span class="toc-number">5.2.1.</span> <span class="toc-text">2.1 应用层：发送HTTP请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-传输层：发送TCP报文"><span class="toc-number">5.2.2.</span> <span class="toc-text">2.2 传输层：发送TCP报文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-网络层：IP协议查询Mac地址"><span class="toc-number">5.2.3.</span> <span class="toc-text">2.3 网络层：IP协议查询Mac地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-链路层：以太网协议"><span class="toc-number">5.2.4.</span> <span class="toc-text">2.4 链路层：以太网协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#以太网协议"><span class="toc-number">5.2.4.1.</span> <span class="toc-text">以太网协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mac-地址"><span class="toc-number">5.2.4.2.</span> <span class="toc-text">Mac 地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#广播"><span class="toc-number">5.2.4.3.</span> <span class="toc-text">广播</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六-服务器处理请求并返回-HTTP-报文"><span class="toc-number">6.</span> <span class="toc-text">六 服务器处理请求并返回 HTTP 报文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-服务器"><span class="toc-number">6.1.</span> <span class="toc-text">1.服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MVC后台处理阶段"><span class="toc-number">6.2.</span> <span class="toc-text">2.MVC后台处理阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-HTTP响应报文"><span class="toc-number">6.3.</span> <span class="toc-text">3.HTTP响应报文</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七-浏览器解析渲染画面"><span class="toc-number">7.</span> <span class="toc-text">七 浏览器解析渲染画面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八-四次挥手断开连接"><span class="toc-number">8.</span> <span class="toc-text">八 四次挥手断开连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-四次挥手"><span class="toc-number">8.1.</span> <span class="toc-text">1.四次挥手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-为什么连接的时候是三次握手，关闭的时候却是四次握手？"><span class="toc-number">8.2.</span> <span class="toc-text">2.为什么连接的时候是三次握手，关闭的时候却是四次握手？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-为什么TIME-WAIT状态需要经过2MSL-最大报文段生存时间-才能返回到CLOSE状态？"><span class="toc-number">8.2.1.</span> <span class="toc-text">3.为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？</span></a></li></ol></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(http://facai1983.top/img/http.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">浏览器在输入URL回车之后都发生了什么</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> Created 2020-01-24<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> Updated 2020-01-24</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%9D%A2%E8%AF%95/%E7%BD%91%E7%BB%9C/">网络</a><i class="fa fa-angle-right fa-fw" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E9%9D%A2%E8%AF%95/%E7%BD%91%E7%BB%9C/Http/">Http</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>Post View:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>comments:</span><a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/" itemprop="commentCount"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="一-总体流程图"><a href="#一-总体流程图" class="headerlink" title="一 总体流程图"></a>一 总体流程图</h2><a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/total.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="total" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/total.png"></a>

<p>从URL输入到页面展现</p>
<p>总体来说分为以下几个过程:</p>
<ol>
<li>URL 解析</li>
<li>DNS 解析：将域名解析成 IP 地址</li>
<li>TCP 连接：TCP 三次握手</li>
<li>发送 HTTP 请求</li>
<li>服务器处理请求并响应 HTTP 报文</li>
<li>浏览器解析渲染页面</li>
<li>断开连接：TCP 四次挥手</li>
</ol>
<h2 id="二-URL解析"><a href="#二-URL解析" class="headerlink" title="二 URL解析"></a>二 URL解析</h2><h3 id="1-定义"><a href="#1-定义" class="headerlink" title="1.定义"></a>1.定义</h3><p>URL（Uniform Resource Locator），统一资源定位符，用于定位互联网上资源，俗称网址。比如 <a href="http://www.w3school.com.cn/html/index.asp，遵守以下的语法规则：" target="_blank" rel="noopener">http://www.w3school.com.cn/html/index.asp，遵守以下的语法规则：</a></p>
<p>　　<strong>scheme://host.domain:port/path/filename</strong></p>
<h3 id="2-各部分解释"><a href="#2-各部分解释" class="headerlink" title="2.各部分解释"></a>2.各部分解释</h3><p>　　　　scheme - 定义因特网服务的类型。常见的协议有 http、https、ftp、file，其中最常见的类型是 http，而 https 则是进行加密的网络传输。</p>
<p>　　　　host - 定义域主机（http 的默认主机是 www）</p>
<p>　　　　domain - 定义因特网<strong>域名</strong>，比如 w3school.com.cn</p>
<p>　　　　port - 定义主机上的端口号（http 的默认端口号是 80）</p>
<p>　　　　path - 定义服务器上的路径（如果省略，则文档必须位于网站的根目录中）。</p>
<p>　　　　filename - 定义文档/资源的名称</p>
<h3 id="3-解析流程"><a href="#3-解析流程" class="headerlink" title="3.解析流程"></a>3.解析流程</h3><h4 id="（1）地址解析"><a href="#（1）地址解析" class="headerlink" title="（1）地址解析"></a>（1）地址解析</h4><p>首先判断你输入的是一个合法的 URL 还是一个待搜索的关键词，并且根据你输入的内容进行自动完成、字符编码等操作。</p>
<h4 id="（2）HSTS"><a href="#（2）HSTS" class="headerlink" title="（2）HSTS"></a>（2）HSTS</h4><p>由于安全隐患，会使用 HSTS 强制客户端使用 HTTPS 访问页面。</p>
<h4 id="（3）其他操作"><a href="#（3）其他操作" class="headerlink" title="（3）其他操作"></a>（3）其他操作</h4><p>浏览器还会进行一些额外的操作，比如安全检查、访问限制（之前国产浏览器限制 996.icu）。</p>
<h4 id="（4）检查缓存"><a href="#（4）检查缓存" class="headerlink" title="（4）检查缓存"></a>（4）检查缓存</h4><a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/cache.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="cache" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/cache.png"></a>

<h2 id="三-DNS域名解析"><a href="#三-DNS域名解析" class="headerlink" title="三 DNS域名解析"></a>三 DNS域名解析</h2><p>在浏览器输入网址后，首先要经过域名解析，因为浏览器并不能直接通过域名找到对应的服务器，而是要通过 IP 地址。大家这里或许会有个疑问—-计算机既可以被赋予 IP 地址，也可以被赋予主机名和域名。比如 <code>www.hackr.jp</code>。那怎么不一开始就赋予个 IP 地址？这样就可以省去解析麻烦。我们先来了解下什么是 IP 地址。</p>
<h3 id="1-IP-地址"><a href="#1-IP-地址" class="headerlink" title="1 .IP 地址"></a>1 .IP 地址</h3><p>IP 地址是指互联网协议地址，是 IP Address 的缩写。IP 地址是 IP  协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。IP 地址是一个 32  位的二进制数，比如 127.0.0.1 为本机 IP。</p>
<p>　　域名就相当于 IP  地址乔装打扮的伪装者，带着一副面具。它的作用就是便于记忆和沟通的一组服务器的地址。用户通常使用主机名或域名来访问对方的计算机，而不是直接通过  IP 地址访问。<strong>因为与 IP  地址的一组纯数字相比，用字母配合数字的表示形式来指定计算机名更符合人类的记忆习惯。</strong>但要让计算机去理解名称，相对而言就变得困难了。因为计算机更擅长处理一长串数字。为了解决上述的问题，DNS 服务应运而生。</p>
<h3 id="2-什么是域名解析"><a href="#2-什么是域名解析" class="headerlink" title="2.什么是域名解析"></a>2.什么是域名解析</h3><p>DNS 协议提供通过域名查找 IP 地址，或逆向从 IP 地址反查域名的服务。<strong>DNS 是一个网络服务器，我们的域名解析简单来说就是在 DNS 上记录一条信息记录</strong>。</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">　　例如 baidu.com 220.114.23.56（服务器外网IP地址）80（服务器端口号）</span><br></pre></td></tr></table></figure></div>

<h3 id="3-如何通过URL查询对应IP"><a href="#3-如何通过URL查询对应IP" class="headerlink" title="3.如何通过URL查询对应IP"></a>3.如何通过URL查询对应IP</h3><p>基本步骤如下：</p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/DNS.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="DNS" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/DNS.png"></a>

<h4 id="3-1-浏览器缓存"><a href="#3-1-浏览器缓存" class="headerlink" title="3.1 浏览器缓存"></a>3.1 浏览器缓存</h4><p>浏览器会先检查是否在缓存中，没有则调用系统库函数进行查询。浏览器会按照一定的频率缓存 DNS 记录。</p>
<h4 id="3-2-操作系统缓存"><a href="#3-2-操作系统缓存" class="headerlink" title="3.2 操作系统缓存"></a>3.2 操作系统缓存</h4><p>如果浏览器缓存中找不到需要的 DNS 记录，那就去操作系统中找。操作系统也有自己的 DNS缓存，但在这之前，会向检查域名是否存在本地的 Hosts 文件里，没有则向 DNS 服务器发送查询请求。</p>
<h4 id="3-3-路由器缓存"><a href="#3-3-路由器缓存" class="headerlink" title="3.3 路由器缓存"></a>3.3 路由器缓存</h4><p>路由器也有自己的缓存。</p>
<h4 id="3-4-ISP-DNS缓存"><a href="#3-4-ISP-DNS缓存" class="headerlink" title="3.4 ISP DNS缓存"></a>3.4 ISP DNS缓存</h4><p>ISP 是互联网服务提供商(Internet Service Provider)的简称，ISP 有专门的 DNS 服务器应对 DNS 查询请求。ISP DNS 就是在客户端电脑上设置的首选 DNS 服务器，它们在大多数情况下都会有缓存。</p>
<h4 id="3-5-根域名服务器查询"><a href="#3-5-根域名服务器查询" class="headerlink" title="3.5 根域名服务器查询"></a>3.5 根域名服务器查询</h4><p>ISP 的 DNS 服务器还找不到的话，它就会向根服务器发出请求，进行递归查询（DNS 服务器先问根域名服务器.com 域名服务器的 IP  地址，然后再问.baidu 域名服务器，依次类推）在前面所有步骤没有缓存的情况下，本地 DNS  服务器会将请求转发到互联网上的根域，下面这个图很好的诠释了整个流程：</p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/DNS1.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="DNS1" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/DNS1.png"></a>

<h3 id="4-小结"><a href="#4-小结" class="headerlink" title="4.小结"></a>4.小结</h3><p>浏览器通过向 DNS 服务器发送域名，DNS 服务器查询到与域名相对应的 IP 地址，然后返回给浏览器，浏览器再将 IP  地址打在协议上，同时请求参数也会在协议搭载，然后一并发送给对应的服务器。接下来介绍向服务器发送 HTTP 请求阶段，HTTP  请求分为三个部分：TCP 三次握手、http 请求响应信息、关闭 TCP 连接。</p>
<p><strong>需要注意的点</strong></p>
<ol>
<li>递归方式：一路查下去中间不返回，得到最终结果才返回信息（浏览器到本地DNS服务器的过程）</li>
<li>迭代方式，就是本地DNS服务器到根域名服务器查询的方式。</li>
<li>什么是 DNS 劫持</li>
<li>前端 dns-prefetch 优化</li>
</ol>
<h2 id="四-三次握手建立连接"><a href="#四-三次握手建立连接" class="headerlink" title="四 三次握手建立连接"></a>四 三次握手建立连接</h2><p>在客户端发送数据之前需要发起 TCP 三次握手建立与服务端的连接，用以同步客户端和服务端的序列号和确认号，并交换 TCP 窗口大小信息。所谓三次握手(Three-way Handshake)，是指建立一个TCP连接时，需要客户端和服务器总共发送3个包。</p>
<h3 id="1-TCP三次握手"><a href="#1-TCP三次握手" class="headerlink" title="1.TCP三次握手"></a>1.TCP三次握手</h3><a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/TCP1.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="TCP1" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/TCP1.png"></a>

<p>　(1) 第一次握手：建立连接时，客户端A发送SYN包(SYN=1，同时选择一个初始序列号 seq=x )到服务器B，并进入<strong>SYN_SEND</strong>状态，等待服务器B确认。</p>
<p>　(2) 第二次握手：服务器B收到SYN包，必须确认客户A的SYN=1，同时自己也发送一个SYN包(SYN=1，确认号是ack=x+1，同时也要为自己初始化一个序列号 seq=y)，即SYN+ACK包，此时服务器B进入<strong>SYN_RECV</strong>状态。</p>
<p>　(3) 第三次握手：客户端A收到服务器B的SYN＋ACK包，向服务器B发送确认包ACK(ack=y+1，自己的序列号seq=Z)，此包发送完毕，客户端A和服务器B进入<strong>ESTABLISHED</strong>状态，完成。</p>
<h3 id="2-什么是SYN攻击"><a href="#2-什么是SYN攻击" class="headerlink" title="2.什么是SYN攻击"></a>2.什么是SYN攻击</h3><p>在三次握手过程中，服务器发送 SYN+ACK 之后，收到客户端的ACK之前的TCP连接称为<strong>半连接</strong>(half-open connect)。此时服务器处于Syn_RECV状态。当收到ACK后，服务器转入ESTABLISHED状态。</p>
<p>　　Syn攻击就是攻击客户端在短时间内伪造大量不存在的IP地址，向服务器不断地发送syn包，服务器回复确认包，并等待客户的确认，由于源地址是不存在的，服务器需要不断的重发直 至超时，这些伪造的SYN包将长时间占用未连接队列，正常的SYN请求被丢弃，目标系统运行缓慢，严重者引起网络堵塞甚至系统瘫痪。</p>
<p>　　Syn攻击是一个典型的<a href="https://www.centos.bz/tag/ddos/" target="_blank" rel="noopener">DDOS</a>攻击。检测SYN攻击非常的方便，当你在服务器上看到大量的半连接状态时，特别是源IP地址是随机的，基本上可以断定这是一次SYN攻击。在<a href="http://www.centos.bz/" target="_blank" rel="noopener">Linux</a>下可以如下命令检测是否被Syn攻击</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -n -p TCP | grep SYN_RECV</span><br></pre></td></tr></table></figure></div>

<p>一般较新的TCP/IP协议栈都对这一过程进行修正来防范Syn攻击，修改tcp协议实现。主要方法有SynAttackProtect保护机制、SYN cookies技术、增加最大半连接和缩短超时时间等。但是不能完全防范syn攻击。</p>
<h3 id="3-为什么不使用两次握手"><a href="#3-为什么不使用两次握手" class="headerlink" title="3.为什么不使用两次握手"></a>3.为什么不使用两次握手</h3><p>答：3次握手完成两个重要的功能，既要双方做好发送数据的准备工作(双方都知道彼此已准备好)，也要允许双方就初始序列号进行协商，这个序列号在握手过程中被发送和确认。　　</p>
<p>　　如果把三次握手改成仅需要两次握手，<strong>死锁是可能发生的</strong>。如下图所示，如果计算机Client和Server之间的通信，假定Client给Server发送一个连接请求分组，Server收到了这个分组，并发送了确认应答分组。按照两次握手的协定，Server认为连接已经成功地建立了，可以开始发送数据分组。可是，Client在Server的应答分组在传输中被丢失的情况下，将不知道Server是否已准备好，不知道Server建立什么样的序列号，Client甚至怀疑Server是否收到自己的连接请求分组。在这种情况下，Client认为连接还未建立成功，将忽略Server发来的任何数据分组，Client只等待连接确认应答分组。而Server在发出的数据分组超时后，重复发送同样的数据分组。这样就形成了<strong>死锁</strong>。</p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/TCP11.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="TCP11" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/TCP11.png"></a>

<p>　　另外三次握手可以<strong>防止已失效的连接请求报文段突然又传到了Server</strong>，因而产生错误。假定出现一种异常情况，即Client发出的第一个连接请求报文段并没有丢失，而是在某些网络结  点长时间滞留了，一直延迟到连接释放以后的某个时间才到达Server，本来这是一个早已失效的报文段。但Server收到此失效的连接请求报文段后，就误认为是Client又发出一次  新的连接请求，于是就向Client发出确认报文段，同意建立连接。假定不采用三次握手，那么只要Server发出确认，新的连接就建立了，这样一直等待Client发来数据，Server的许多资源就这样白白浪费了。</p>
<h2 id="五-发送HTTP请求"><a href="#五-发送HTTP请求" class="headerlink" title="五 发送HTTP请求"></a>五 发送HTTP请求</h2><h3 id="1-请求报文"><a href="#1-请求报文" class="headerlink" title="1.请求报文"></a>1.请求报文</h3><p>TCP 三次握手结束后，开始发送 HTTP 请求报文。<br>请求报文由请求行（request line）、请求头（header）、请求体三个部分组成，如下图所示</p>


<h4 id="1-1-请求行包含的请求方法-URL"><a href="#1-1-请求行包含的请求方法-URL" class="headerlink" title="1.1 请求行包含的请求方法 URL"></a>1.1 请求行包含的请求方法 URL</h4><ul>
<li>　请求方法包含 8 种：GET、POST、PUT、DELETE、PATCH、HEAD、OPTIONS、TRACE。</li>
<li>　URL 即请求地址，由 &lt;协议&gt;：//&lt;主机&gt;：&lt;端口&gt;/&lt;路径&gt;?&lt;参数&gt; 组成</li>
<li>　协议版本即 http 版本号</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST  &#x2F;chapter17&#x2F;user.html HTTP&#x2F;1.1</span><br></pre></td></tr></table></figure></div>

<p>以上代码中“POST”代表请求方法，“/chapter17/user.html”表示 URL，“HTTP/1.1”代表协议和协议的版本。现在比较流行的是 Http1.1 版本</p>
<h4 id="1-2-请求头包含请求的附加信息，由关键字-值对组成，每行一对，关键字和值用英文冒号“-”分隔"><a href="#1-2-请求头包含请求的附加信息，由关键字-值对组成，每行一对，关键字和值用英文冒号“-”分隔" class="headerlink" title="1.2 请求头包含请求的附加信息，由关键字/值对组成，每行一对，关键字和值用英文冒号“:”分隔"></a>1.2 请求头包含请求的附加信息，由关键字/值对组成，每行一对，关键字和值用英文冒号“:”分隔</h4><p>请求头部通知服务器有关于客户端请求的信息。它包含许多有关的客户端环境和请求正文的有用信息。其中比如：Host，表示主机名，虚拟主机；Connection,HTTP/1.1 增加的，使用 keepalive，即持久连接，一个连接可以发多个请求；User-Agent，请求发出者，兼容性以及定制化需求。</p>
<h4 id="1-3-请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据"><a href="#1-3-请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据" class="headerlink" title="1.3 请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据"></a>1.3 请求体，可以承载多个请求参数的数据，包含回车符、换行符和请求数据，并不是所有请求都具有请求数据</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name&#x3D;tom&amp;password&#x3D;1234&amp;realName&#x3D;tomson</span><br></pre></td></tr></table></figure></div>

<p>　　上面代码，承载着 name、password、realName 三个请求参数。</p>
<h3 id="2-请求流程"><a href="#2-请求流程" class="headerlink" title="2.请求流程"></a>2.请求流程</h3><p>TCP/IP 分为四层，在发送数据时，每层都要对数据进行封装： </p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/TCPIP.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="TCPIP" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/TCPIP.png"></a>

<h4 id="2-1-应用层：发送HTTP请求"><a href="#2-1-应用层：发送HTTP请求" class="headerlink" title="2.1 应用层：发送HTTP请求"></a>2.1 应用层：发送HTTP请求</h4><p>在前面的步骤我们已经得到服务器的 IP 地址，浏览器会开始构造一个 HTTP 报文，其中需要注意的点：</p>
<p>浏览器只能发送 GET、POST 方法，而打开网页使用的是 GET 方法</p>
<h4 id="2-2-传输层：发送TCP报文"><a href="#2-2-传输层：发送TCP报文" class="headerlink" title="2.2 传输层：发送TCP报文"></a>2.2 传输层：发送TCP报文</h4><p>传输层会发起一条到达服务器的 TCP 连接，为了方便传输，会对数据进行分割（以报文段为单位），并标记编号，方便服务器接受时能够准确地还原报文信息。</p>
<p>在建立连接前，会先进行 TCP 三次握手。</p>
<h4 id="2-3-网络层：IP协议查询Mac地址"><a href="#2-3-网络层：IP协议查询Mac地址" class="headerlink" title="2.3 网络层：IP协议查询Mac地址"></a>2.3 网络层：IP协议查询Mac地址</h4><p>将数据段打包，并加入源及目标的IP地址，并且负责寻找传输路线。判断目标地址是否与当前地址处于同一网络中，是的话直接根据 Mac 地址发送，否则使用路由表查找下一跳地址，以及使用 ARP 协议查询它的 Mac 地址。</p>
<h4 id="2-4-链路层：以太网协议"><a href="#2-4-链路层：以太网协议" class="headerlink" title="2.4 链路层：以太网协议"></a>2.4 链路层：以太网协议</h4><h5 id="以太网协议"><a href="#以太网协议" class="headerlink" title="以太网协议"></a>以太网协议</h5><p>根据以太网协议将数据分为以“帧”为单位的数据包，每一帧分为两个部分：</p>
<p>标头：数据包的发送者、接受者、数据类型</p>
<p>数据：数据包具体内容</p>
<h5 id="Mac-地址"><a href="#Mac-地址" class="headerlink" title="Mac 地址"></a>Mac 地址</h5><p>以太网规定了连入网络的所有设备都必须具备“网卡”接口，数据包都是从一块网卡传递到另一块网卡，网卡的地址就是 Mac 地址。每一个 Mac 地址都是独一无二的，具备了一对一的能力。</p>
<h5 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h5><p>发送数据的方法很原始，直接把数据通过 ARP 协议，向本网络的所有机器发送，接收方根据标头信息与自身 Mac 地址比较，一致就接受，否则丢弃。</p>
<p>注意：接收方回应是单播。</p>
<h2 id="六-服务器处理请求并返回-HTTP-报文"><a href="#六-服务器处理请求并返回-HTTP-报文" class="headerlink" title="六 服务器处理请求并返回 HTTP 报文"></a>六 服务器处理请求并返回 HTTP 报文</h2><p>大致流程如下：</p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/http.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="http" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/http.png"></a>

<h3 id="1-服务器"><a href="#1-服务器" class="headerlink" title="1.服务器"></a>1.服务器</h3><p>服务器是网络环境中的高性能计算机，它侦听网络上的其他计算机（客户机）提交的服务请求，并提供相应的服务，比如网页服务、文件下载服务、邮件服务、视频服务。而客户端主要的功能是浏览网页、看视频、听音乐等等，两者截然不同。 每台服务器上都会安装处理请求的应用——web server。常见的 web server 产品有 apache、nginx、IIS 或  Lighttpd 等。</p>
<p>　　<strong>web server 担任管控的角色</strong>，对于不同用户发送的请求，会结合配置文件，把不同请求委托给服务器上处理相应请求的程序进行处理（例如 CGI 脚本，JSP 脚本，servlets，ASP 脚本，服务器端  JavaScript，或者一些其它的服务器端技术等），然后返回后台程序处理产生的结果作为响应。</p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/difference.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="difference" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/difference.png"></a>

<h3 id="2-MVC后台处理阶段"><a href="#2-MVC后台处理阶段" class="headerlink" title="2.MVC后台处理阶段"></a>2.MVC后台处理阶段</h3><p>后台开发现在有很多框架，但大部分都还是按照 MVC 设计模式进行搭建的。MVC 是一个设计模式，将应用程序分成三个核心部件：模型（model）– 视图（view）–控制器（controller），它们各自处理自己的任务，实现输入、处理和输出的分离。</p>
<p>　　简而言之，首先浏览器发送过来的请求先经过控制器，控制器进行逻辑处理和请求分发，接着会调用模型，这一阶段模型会获取  redis db 以及 MySQL  的数据，获取数据后将渲染好的页面，响应信息会以响应报文的形式返回给客户端，最后浏览器通过渲染引擎将网页呈现在用户面前。</p>
<h3 id="3-HTTP响应报文"><a href="#3-HTTP响应报文" class="headerlink" title="3.HTTP响应报文"></a>3.HTTP响应报文</h3><p>响应报文由响应行（request line）、响应头部（header）、响应主体三个部分组成。如下图所示：</p>
<a href="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/head.png" data-fancybox="group" data-caption="undefined" class="fancybox"><img class="lazyload" title="head" data-src="/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/head.png"></a>

<p>(1) 响应行包含：协议版本，状态码，状态码描述</p>
<p>状态码规则如下：<br>1xx：指示信息–表示请求已接收，继续处理。</p>
<p>2xx：成功–表示请求已被成功接收、理解、接受。</p>
<p>3xx：重定向–要完成请求必须进行更进一步的操作。</p>
<p>4xx：客户端错误–请求有语法错误或请求无法实现。</p>
<p>5xx：服务器端错误–服务器未能实现合法的请求。</p>
<p>(2) 响应头部包含响应报文的附加信息，由 名/值 对组成</p>
<p>(3) 响应主体包含回车符、换行符和响应返回数据，并不是所有响应报文都有响应数据</p>
<h2 id="七-浏览器解析渲染画面"><a href="#七-浏览器解析渲染画面" class="headerlink" title="七 浏览器解析渲染画面"></a>七 浏览器解析渲染画面</h2><h2 id="八-四次挥手断开连接"><a href="#八-四次挥手断开连接" class="headerlink" title="八 四次挥手断开连接"></a>八 四次挥手断开连接</h2><h3 id="1-四次挥手"><a href="#1-四次挥手" class="headerlink" title="1.四次挥手"></a>1.四次挥手</h3><p>当数据传送完毕，需要断开 tcp 连接，此时发起 tcp 四次挥手。TCP的连接的拆除需要发送四个包，因此称为四次挥手(four-way  handshake)。客户端或服务器均可主动发起挥手动作，在socket编程中，任何一方执行close()操作即可产生挥手操作。</p>


<p>（1）客户端A发送一个FIN，用来关闭客户A到服务器B的数据传送(报文段4)。<strong>发起方向被动方发送报文，Fin、Ack、Seq，表示已经没有数据传输了。并进入 FIN_WAIT_1 状态</strong>。(第一次挥手：由浏览器发起的，发送给服务器，我请求报文发送完了，你准备关闭吧)</p>
<p>　　（2）服务器B收到这个FIN，它发回一个ACK，确认序号为收到的序号加1(报文段5)。和SYN一样，一个FIN将占用一个序号。<strong>被动方发送确认报文，Ack、Seq，表示同意关闭请求。此时主动发起方进入 FIN_WAIT_2 状态</strong>。(第二次挥手：由服务器发起的，告诉浏览器，我请求报文接受完了，我准备关闭了，你也准备吧)</p>
<p>　　（3）服务器B关闭与客户端A的连接，发送一个FIN给客户端A(报文段6)。<strong>被动方向发起方发送报文段，Fin、Ack、Seq，请求关闭连接。并进入 LAST_ACK 状态</strong>。(第三次挥手：由服务器发起，告诉浏览器，我响应报文发送完了，你准备关闭吧)</p>
<p>　　（4）客户端A发回ACK报文确认，并将确认序号设置为收到序号加1(报文段7)。<strong>发起方向被动方发送报文段，Ack、Seq。然后进入等待 TIME_WAIT 状态。被动方收到发起方的报文段以后关闭连接。发起方等待一定时间2MSL未收到回复，则正常关闭</strong>。(第四次挥手：由浏览器发起，告诉服务器，我响应报文接受完了，我准备关闭了，你也准备吧)</p>
<h3 id="2-为什么连接的时候是三次握手，关闭的时候却是四次握手？"><a href="#2-为什么连接的时候是三次握手，关闭的时候却是四次握手？" class="headerlink" title="2.为什么连接的时候是三次握手，关闭的时候却是四次握手？"></a>2.为什么连接的时候是三次握手，关闭的时候却是四次握手？</h3><p>答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，”你发的FIN报文我收到了”。</p>
<p>只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。</p>
<h4 id="3-为什么TIME-WAIT状态需要经过2MSL-最大报文段生存时间-才能返回到CLOSE状态？"><a href="#3-为什么TIME-WAIT状态需要经过2MSL-最大报文段生存时间-才能返回到CLOSE状态？" class="headerlink" title="3.为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？"></a>3.为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？</h4><p>答：虽然按道理，四个报文都发送完毕，我们可以直接进入CLOSE状态了，但是我们必须假想网络是不可靠的，有可能最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。在Client发送出最后的ACK回复，但该ACK可能丢失。Server如果没有收到ACK，将不断重复发送FIN片段。</p>
<p>所以Client不能立即关闭，它必须确认Server接收到了该ACK。Client会在发送出ACK之后进入到TIME_WAIT状态。Client会设置一个计时器，等待2MSL的时间。如果在该时间内再次收到FIN，那么Client会重发ACK并再次等待2MSL。所谓的2MSL是两倍的MSL(Maximum Segment Lifetime)。</p>
<p>MSL指一个片段在网络中最大的存活时间，2MSL就是一个发送和一个回复所需的最大时间。如果直到2MSL，Client都没有再次收到FIN，那么Client推断ACK已经被成功接收，则结束TCP连接。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">chew</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://facai1983.top/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/">http://facai1983.top/2020/01/24/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9C%A8%E8%BE%93%E5%85%A5URL%E5%9B%9E%E8%BD%A6%E4%B9%8B%E5%90%8E%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记    </a><a class="post-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C/">网络    </a><a class="post-meta__tags" href="/tags/Http/">Http    </a></div><div class="post_share"><div class="social-share" data-image="http://facai1983.top/img/http.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.png" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.png" alt="支付寶"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/01/25/%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%8C%E7%BA%A2%E9%BB%91%E6%A0%91%EF%BC%8CB-%E6%A0%91%EF%BC%8CB-%E6%A0%91/"><img class="prev_cover lazyload" data-src="http://facai1983.top/img/tree.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>平衡二叉树，红黑树，B-树，B+树</span></div></a></div><div class="next-post pull_right"><a href="/2020/01/23/IO%E6%B5%81%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84/"><img class="next_cover lazyload" data-src="http://facai1983.top/img/IO.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>IO流的层次结构</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> Recommend</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/01/23/Get和Post的区别/" title="Get和Post的区别"><img class="relatedPosts_cover lazyload"data-src="http://facai1983.top/img/http.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">Get和Post的区别</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/17/什么是面向对象思想/" title="什么是面向对象思想"><img class="relatedPosts_cover lazyload"data-src="http://facai1983.top/img/OOP.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">什么是面向对象思想</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/06/解决事务一致性的方案/" title="解决事务一致性的方案"><img class="relatedPosts_cover lazyload"data-src="https://bkimg.cdn.bcebos.com/pic/738b4710b912c8fc8cb9b347f6039245d78821f5@wm_1,g_7,k_d2F0ZXIvYmFpa2U4MA==,xp_5,yp_5"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">解决事务一致性的方案</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/06/使用LCN实现分布式事务一致性1/" title="使用LCN实现分布式事务一致性"><img class="relatedPosts_cover lazyload"data-src="https://bkimg.cdn.bcebos.com/pic/738b4710b912c8fc8cb9b347f6039245d78821f5@wm_1,g_7,k_d2F0ZXIvYmFpa2U4MA==,xp_5,yp_5"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">使用LCN实现分布式事务一致性</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/07/使用LCN实现分布式事务一致性/" title="实操——使用LCN实现分布式事务一致性"><img class="relatedPosts_cover lazyload"data-src="http://facai1983.top/img/一致性.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">实操——使用LCN实现分布式事务一致性</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/10/关于Redis/" title="关于Redis"><img class="relatedPosts_cover lazyload"data-src="http://facai1983.top/img/redis.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-31</div><div class="relatedPosts_title">关于Redis</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> Comment</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'jbVBGNiWBwRavzd2W1J9xR0l-gzGzoHsz',
  appKey:'5O4E9wX4KIBNWRdKriSVX6mY',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By chew</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>